(this["webpackJsonpfirstcoin-ui"]=this["webpackJsonpfirstcoin-ui"]||[]).push([[0],{16:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r,s=n(2),c=n.n(s),a=n(10),i=n.n(a),o=(n(16),n(0)),l=function(e){e.state,e.dispatch;return Object(o.jsxs)("div",{className:"bg-background2 flex flex-col items-center h-24 border-b border-grey mb-10",children:[Object(o.jsx)("div",{className:"text-trendyBlue font-bold text-xl",children:"Firstcoin"}),Object(o.jsx)("div",{className:"text-trendyGrey font-bold",children:"Freddie O'Donnell"}),Object(o.jsx)("div",{className:"text-trendyGrey",children:"Cape Town"})]})},u=n(1),d=n(5);!function(e){e.BLOCKCHAIN="BLOCKCHAIN",e.BLOCK="BLOCK",e.HOST_DETAILS="HOST_DETAILS",e.UNCONFIRMED_TX_POOL="UNCONFIRMED_TX_POOL",e.CLEAR_HOSTS="CLEAR_HOSTS",e.STATUS_MESSAGE="STATUS_MESSAGE"}(r||(r={}));var b,j=function(e){return{type:r.BLOCKCHAIN,payload:e}},f=function(e){return{type:r.UNCONFIRMED_TX_POOL,payload:e}},h=function(e){return{type:r.STATUS_MESSAGE,payload:e}};!function(e){e.ERROR="ERROR",e.SUCCESS="SUCCESS",e.NOTICE="NOTICE",e.BLANK="BLANK"}(b||(b={}));var x,v={blockchain:{blocks:[]},hostDetails:[],unconfirmedTxPool:[],statusMessage:{message:""}},O=function(e,t){switch(console.log("-------------state before-----------------"),console.log(e),console.log("----------------action--------------------"),console.log(t),t.type){case r.BLOCKCHAIN:return Object(u.a)(Object(u.a)({},e),{},{blockchain:Object(u.a)(Object(u.a)({},e.blockchain),t.payload)});case r.BLOCK:return Object(u.a)(Object(u.a)({},e),{},{blockchain:Object(u.a)(Object(u.a)({},e.blockchain),t.payload)});case r.HOST_DETAILS:var n=JSON.parse(JSON.stringify(t.payload)),s=function(e){return parseInt(e.split(":")[1])},c=n.sort((function(e,t){return s(e.hostname)<s(t.hostname)?-1:1}));return Object(u.a)(Object(u.a)({},e),{},{hostDetails:c});case r.CLEAR_HOSTS:return Object(u.a)(Object(u.a)({},e),{},{hostDetails:[]});case r.UNCONFIRMED_TX_POOL:return Object(u.a)(Object(u.a)({},e),{},{unconfirmedTxPool:t.payload.pool});case r.STATUS_MESSAGE:return t.payload.message!==e.statusMessage.message&&t.payload.level!==e.statusMessage.level?Object(u.a)(Object(u.a)({},e),{},{statusMessage:Object(u.a)({},t.payload)}):e;default:return e}},p=c.a.createContext({state:v,dispatch:function(e){return console.warn("WARNING! Dispatch function not set. Attemting to dispatch ".concat(e))}}),m=function(e){var t=e.children,n=Object(s.useReducer)(O,Object(u.a)(Object(u.a)({},v),{})),r=Object(d.a)(n,2),c=r[0],a=r[1];return console.log("-------------state after-----------------"),console.log(c),Object(o.jsx)(p.Provider,{value:{state:c,dispatch:a},children:t})},y=n(3),g=n.n(y),w=n(4),N=(n(7),n(8),function(e){var t=e.txOData;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:["scriptPubKey: ",S(t.scriptPubKey)]}),Object(o.jsxs)("div",{children:["value: ",t.value]})]})}),k=function(e){var t=e.txInData;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:["txid: ",t.txid]}),Object(o.jsxs)("div",{children:["vout: ",t.vout]}),Object(o.jsxs)("div",{children:["scriptSig: ",t.scriptSig.substring(0,5)," ..."]})]})},S=function(e){return"".concat(e.substring(0,5),"...").concat(e.substring(20,25),"...").concat(e.substring(e.length-6,e.length-1))},T=function(e){var t=e.txData;return Object(o.jsxs)("div",{className:"text-xs",children:[Object(o.jsxs)("div",{children:["id: ",t.txid.substring(0,5),"..."]}),Object(o.jsxs)("div",{children:["timestamp: ",t.timestamp.toString().substring(0,10),"..."]}),Object(o.jsxs)("div",{children:["txO: [",t.vout.map((function(e,t){return Object(o.jsx)("div",{className:"pl2",children:Object(o.jsx)(N,{txOData:e})},t)})),"]"]}),Object(o.jsxs)("div",{children:["txIn: [",t.vin.map((function(e,t){return Object(o.jsx)("div",{className:"pl2",children:Object(o.jsx)(k,{txInData:e})},t)})),"]"]})]})},C=(n(9),n(11)),E=n.n(C);!function(e){e[e.Backwards=0]="Backwards",e[e.Forwards=1]="Forwards"}(x||(x={}));var A=function(e){var t=e.blockData,n=e.last,r=e.direction,c=Object(s.useState)(!1),a=Object(d.a)(c,2),i=a[0],l=a[1];return Object(o.jsxs)("div",{className:"w-full flex flex-col items-center",children:[Object(o.jsx)("div",{className:"w-5/12 transform transition duration-500 hover:scale-105 flex flex-col items-center",children:Object(o.jsx)(E.a,{duration:500,height:i?"auto":150,className:"w-full border-2 border-trendyGrey rounded-lg animate__animated animate__rubberBand",children:Object(o.jsx)("div",{onClick:function(){return l(!i)},className:" cursor-pointer",children:Object(o.jsxs)("div",{className:"rounded text-trendyGrey bg-trendyGreen tran block p-2 overflow-hidden",children:[Object(o.jsxs)("div",{children:["index: ",t.index]}),Object(o.jsxs)("div",{children:["hash: ",t.hash.substring(0,10),"..."]}),Object(o.jsxs)("div",{children:["prev: ",t.previousHash?t.previousHash.substring(0,10):null]}),Object(o.jsxs)("div",{children:["difficulty: ",t.difficultyLevel]}),Object(o.jsxs)("div",{children:["time: ",t.timestamp]}),Object(o.jsxs)("div",{children:["transactions: ",t.transactions.map((function(e,t){return Object(o.jsx)(T,{txData:e},t)}))]})]})})})}),r==x.Forwards&&!n&&Object(o.jsx)("span",{className:"arrow arrow-down"})]})},D=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/block-chain");case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch blockchain returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(w.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/create-block",{method:"POST",body:JSON.stringify({a:1,b:"Textual content"})});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.next=7,t.json();case 7:throw n=e.sent,console.log(n),new Error("create blockchain returns "+t.status);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/hosts",{method:"POST",body:JSON.stringify({})});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch hosts returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/txpool",{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch host details returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(g.a.mark((function e(t,n,r){var s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spend-coin-relay",{method:"POST",body:JSON.stringify({host:t,address:n,amount:r})});case 2:if(!(s=e.sent).ok){e.next=5;break}return e.abrupt("return",s.json());case 5:return e.next=7,s.json();case 7:throw c=e.sent,new Error("pay from host ".concat(t," returns ").concat(s.status," ").concat(c.message));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(w.a)(g.a.mark((function e(t){var n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I();case 3:n=e.sent;try{t((c=Object(u.a)({},n),{type:r.HOST_DETAILS,payload:c}))}catch(a){console.log(a)}return e.next=7,_();case 7:s=e.sent,t(f({pool:Object.values(s)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}var c}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),R=(n(23),function(e){var t=e.dispatch,n=Object(s.useState)(!1),c=Object(d.a)(n,2),a=c[0],i=c[1],l=function(){var e=Object(w.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),e.next=4,L();case 4:n=e.sent,t((s=n,{type:r.BLOCK,payload:s})),P(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:i(!1);case 13:case"end":return e.stop()}var s}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{children:a?Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)("img",{className:"w-3/6",src:"gntl-mining.gif"})}):Object(o.jsx)("div",{onClick:l,className:"h-24 w-36 mb-28 bg-trendyBlue text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Mine"})})}),M=function(e){var t=e.state,n=e.dispatch;Object(s.useEffect)((function(){function e(){return(e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:t=e.sent,n(j({blocks:t.blocks})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]);var r=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[t.blockchain]),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[t.blockchain.blocks.map((function(e,n){return Object(o.jsx)(A,{direction:x.Forwards,last:n===t.blockchain.blocks.length-1,blockData:e},n)})),Object(o.jsx)("div",{ref:r})]}),Object(o.jsx)("div",{className:"pt-10 flex justify-center items-center w-full",children:Object(o.jsx)(R,{dispatch:n})})]})},F=function(e){var t,n,r=e.unconfirmedTxData;return Object(o.jsxs)("div",{className:"border border-black w-11/12 h-24 mb-10 bg-white",children:[Object(o.jsxs)("div",{className:"p-2",children:["using tx: ",S(r.vin[0].txid)]}),Object(o.jsxs)("div",{className:"p-2",children:["pay to: ",S(r.vout[0].scriptPubKey),"  amount: ",r.vout[0].value]}),(null===r||void 0===r?void 0:r.vout[1])&&Object(o.jsxs)(o.Fragment,{children:[S(null===r||void 0===r||null===(t=r.vout[1])||void 0===t?void 0:t.scriptPubKey),"  amount: ",null===r||void 0===r||null===(n=r.vout[1])||void 0===n?void 0:n.value]}),Object(o.jsx)("div",{})]})},G=(n(24),function(e){var t=e.host,n=e.address,r=e.totalAmount,c=e.dispatch,a=Object(s.useState)(""),i=Object(d.a)(a,2),l=i[0],u=i[1],j=Object(s.useState)(0),f=Object(d.a)(j,2),x=f[0],v=f[1],O=function(){var e=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t,l,x);case 3:e.sent,P(c),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c(h({level:b.ERROR,message:e.t0})),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"rounded-md text-white p-4 min-h-100 w-4/5 bg-trendyBlue mb-10",children:[Object(o.jsxs)("div",{className:"justify-content flex space-x-4 pb-4",children:[Object(o.jsx)("div",{className:"flex items-center",children:Object(o.jsxs)("div",{children:["address: ",S(atob(n))]})}),Object(o.jsx)("div",{onClick:function(){navigator.clipboard.writeText(n)},className:"h-10 w-16 bg-trendyYellow text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Copy"})]}),Object(o.jsxs)("div",{className:"mb-4 flex",children:[Object(o.jsxs)("div",{className:"flex align-center space-between",children:[Object(o.jsx)("div",{className:"text-white pr-4 whitespace-nowrap flex flex-col justify-center",children:Object(o.jsx)("div",{className:"",children:"Pay:"})}),Object(o.jsx)("textarea",{onChange:function(e){return v(parseInt(e.target.value))},className:"form-textarea mt-1 mr-2 block w-9/12 border-white overflow-hidden",rows:1,placeholder:"Amount"}),Object(o.jsx)("textarea",{onChange:function(e){return u(e.target.value)},className:"form-textarea mt-1 mr-2 block w-9/12 border-white overflow-hidden",rows:1,placeholder:"To"})]}),Object(o.jsx)("div",{onClick:O,className:"h-10 w-16 mt-1 bg-trendyYellow text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Pay"})]}),Object(o.jsxs)("div",{children:["Balance: ",r]})]})}),K=function(e){var t,n,r=e.state,c=e.dispatch;return Object(s.useEffect)((function(){P(c)}),[c]),Object(o.jsxs)("div",{className:"flex flex-col items-center border-4 border-trendyTurquoise rounded-lg fixed right-0 h-screen bottom-0 w-4/12 overflow-y-scroll",children:[Object(o.jsx)("div",{className:"flex mb-16 items-center justify-center mt-10 font-trendyGrey text-3xl font-medium",children:"Control Panel"}),Object(o.jsx)("div",{className:"flex mb-10 items-center justify-center font-trendyGrey text-xl font-medium",children:"Global Wallets"}),null===r||void 0===r||null===(t=r.hostDetails)||void 0===t?void 0:t.map((function(e,t){return Object(o.jsx)(G,{dispatch:c,host:e.hostname,address:e.address,totalAmount:e.totalAmount},t)})),Object(o.jsx)("div",{className:"flex mb-10 items-center justify-center font-trendyGrey text-xl font-medium",children:"Unconfirmed Transaction pool"}),null===r||void 0===r||null===(n=r.unconfirmedTxPool)||void 0===n?void 0:n.map((function(e,t){return Object(o.jsx)(F,{unconfirmedTxData:e},t)}))]})},H=(n(25),function(e){var t,n,r=e.state,c=e.dispatch;return Object(s.useEffect)((function(){setTimeout((function(){return c(h({message:"",level:b.BLANK}))}),1e4)}),[r.statusMessage]),Object(o.jsx)("div",{children:Object(o.jsx)("div",{style:{position:"fixed",zIndex:1e3},className:"status-message-".concat(r.statusMessage.level," w-8/12 p-10"),children:(null===r||void 0===r||null===(t=r.statusMessage)||void 0===t?void 0:t.message)&&"".concat(null===r||void 0===r||null===(n=r.statusMessage)||void 0===n?void 0:n.message)})})});var U,J=(U=function(e){var t=e.state,n=e.dispatch;return Object(o.jsxs)("div",{className:"bg-background",children:[Object(o.jsxs)("div",{className:"w-8/12",children:[Object(o.jsx)(H,{state:t,dispatch:n}),Object(o.jsx)(l,{state:t,dispatch:n}),Object(o.jsx)(M,{state:t,dispatch:n})]}),Object(o.jsx)(K,{state:t,dispatch:n})]})},function(e){return Object(o.jsx)(p.Consumer,{children:function(t){var n=t.state,r=t.dispatch;return Object(o.jsx)(U,Object(u.a)(Object(u.a)({},e),{},{state:n,dispatch:r}))}})}),X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};i.a.render(Object(o.jsx)(m,{children:Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(J,{})})}),document.getElementById("root")),X()},8:function(e,t,n){},9:function(e,t,n){}},[[26,1,2]]]);
//# sourceMappingURL=main.f23f35a8.chunk.js.map