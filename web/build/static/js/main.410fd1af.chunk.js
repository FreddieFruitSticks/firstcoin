(this["webpackJsonpfirstcoin-ui"]=this["webpackJsonpfirstcoin-ui"]||[]).push([[0],{16:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r,s=n(3),c=n.n(s),a=n(10),o=n.n(a),i=(n(16),n(0)),u=function(e){e.state,e.dispatch;return Object(i.jsxs)("div",{className:"bg-background2 flex flex-col items-center h-24 border-b border-grey mb-10",children:[Object(i.jsx)("div",{className:"text-trendyBlue font-bold text-xl",children:"Firstcoin"}),Object(i.jsx)("div",{className:"text-trendyGrey font-bold",children:"Freddie O'Donnell"}),Object(i.jsx)("div",{className:"text-trendyGrey",children:"Cape Town"})]})},l=n(1),d=n(5);!function(e){e.BLOCKCHAIN="BLOCKCHAIN",e.BLOCK="BLOCK",e.HOST_DETAILS="HOST_DETAILS",e.UNCONFIRMED_TX_POOL="UNCONFIRMED_TX_POOL",e.CLEAR_HOSTS="CLEAR_HOSTS",e.STATUS_MESSAGE="STATUS_MESSAGE"}(r||(r={}));var b,j=function(e){return{type:r.BLOCKCHAIN,payload:e}},h=function(e){return{type:r.HOST_DETAILS,payload:e}},f=function(e){return{type:r.UNCONFIRMED_TX_POOL,payload:e}},x=function(e){return{type:r.STATUS_MESSAGE,payload:e}};!function(e){e.ERROR="ERROR",e.SUCCESS="SUCCESS",e.NOTICE="NOTICE",e.BLANK="BLANK"}(b||(b={}));var p,v={blockchain:{blocks:[]},hostDetails:[],unconfirmedTxPool:[],statusMessage:{message:""}},O=function(e,t){switch(console.log("-------------state before-----------------"),console.log(e),console.log("----------------action--------------------"),console.log(t),t.type){case r.BLOCKCHAIN:return Object(l.a)(Object(l.a)({},e),{},{blockchain:Object(l.a)(Object(l.a)({},e.blockchain),t.payload)});case r.BLOCK:return Object(l.a)(Object(l.a)({},e),{},{blockchain:Object(l.a)(Object(l.a)({},e.blockchain),t.payload)});case r.HOST_DETAILS:var n=JSON.parse(JSON.stringify(e.hostDetails));n.push(t.payload);var s=function(e){return parseInt(e.split(":")[1])},c=n.sort((function(e,t){return s(e.host)<s(t.host)?-1:1}));return Object(l.a)(Object(l.a)({},e),{},{hostDetails:c});case r.CLEAR_HOSTS:return Object(l.a)(Object(l.a)({},e),{},{hostDetails:[]});case r.UNCONFIRMED_TX_POOL:return Object(l.a)(Object(l.a)({},e),{},{unconfirmedTxPool:t.payload.pool});case r.STATUS_MESSAGE:return t.payload.message!==e.statusMessage.message&&t.payload.level!==e.statusMessage.level?Object(l.a)(Object(l.a)({},e),{},{statusMessage:Object(l.a)({},t.payload)}):e;default:return e}},m=c.a.createContext({state:v,dispatch:function(e){return console.warn("WARNING! Dispatch function not set. Attemting to dispatch ".concat(e))}}),y=function(e){var t=e.children,n=Object(s.useReducer)(O,Object(l.a)(Object(l.a)({},v),{})),r=Object(d.a)(n,2),c=r[0],a=r[1];return console.log("-------------state after-----------------"),console.log(c),Object(i.jsx)(m.Provider,{value:{state:c,dispatch:a},children:t})},g=n(2),w=n.n(g),N=n(4),k=(n(7),n(8),function(e){var t=e.txOData;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:["scriptPubKey: ",T(t.scriptPubKey)]}),Object(i.jsxs)("div",{children:["value: ",t.value]})]})}),S=function(e){var t=e.txInData;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:["txid: ",t.txid]}),Object(i.jsxs)("div",{children:["vout: ",t.vout]}),Object(i.jsxs)("div",{children:["scriptSig: ",t.scriptSig.substring(0,5)," ..."]})]})},T=function(e){return"".concat(e.substring(0,5),"...").concat(e.substring(20,25),"...").concat(e.substring(e.length-6,e.length-1))},E=function(e){var t=e.txData;return Object(i.jsxs)("div",{className:"text-xs",children:[Object(i.jsxs)("div",{children:["id: ",t.txid.substring(0,5),"..."]}),Object(i.jsxs)("div",{children:["timestamp: ",t.timestamp.toString().substring(0,10),"..."]}),Object(i.jsxs)("div",{children:["txO: [",t.vout.map((function(e,t){return Object(i.jsx)("div",{className:"pl2",children:Object(i.jsx)(k,{txOData:e})},t)})),"]"]}),Object(i.jsxs)("div",{children:["txIn: [",t.vin.map((function(e,t){return Object(i.jsx)("div",{className:"pl2",children:Object(i.jsx)(S,{txInData:e})},t)})),"]"]})]})},C=(n(9),n(11)),A=n.n(C);!function(e){e[e.Backwards=0]="Backwards",e[e.Forwards=1]="Forwards"}(p||(p={}));var D=function(e){var t=e.blockData,n=e.last,r=e.direction,c=Object(s.useState)(!1),a=Object(d.a)(c,2),o=a[0],u=a[1];return Object(i.jsxs)("div",{className:"w-full flex flex-col items-center",children:[Object(i.jsx)("div",{className:"w-5/12 transform transition duration-500 hover:scale-105 flex flex-col items-center",children:Object(i.jsx)(A.a,{duration:500,height:o?"auto":150,className:"w-full border-2 border-trendyGrey rounded-lg animate__animated animate__rubberBand",children:Object(i.jsx)("div",{onClick:function(){return u(!o)},className:" cursor-pointer",children:Object(i.jsxs)("div",{className:"rounded text-trendyGrey bg-trendyGreen tran block p-2 overflow-hidden",children:[Object(i.jsxs)("div",{children:["index: ",t.index]}),Object(i.jsxs)("div",{children:["hash: ",t.hash.substring(0,10),"..."]}),Object(i.jsxs)("div",{children:["prev: ",t.previousHash?t.previousHash.substring(0,10):null]}),Object(i.jsxs)("div",{children:["difficulty: ",t.difficultyLevel]}),Object(i.jsxs)("div",{children:["time: ",t.timestamp]}),Object(i.jsxs)("div",{children:["transactions: ",t.transactions.map((function(e,t){return Object(i.jsx)(E,{txData:e},t)}))]})]})})})}),r==p.Forwards&&!n&&Object(i.jsx)("span",{className:"arrow arrow-down"})]})},L=function(){var e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/block-chain");case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch blockchain returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(N.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/create-block",{method:"POST",body:JSON.stringify({a:1,b:"Textual content"})});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.next=7,t.json();case 7:throw n=e.sent,console.log(n),new Error("create blockchain returns "+t.status);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/hosts",{method:"POST",body:JSON.stringify({})});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch hosts returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(N.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(t,"/host-details"),{method:"GET"});case 2:if(!(n=e.sent).ok){e.next=5;break}return e.abrupt("return",n.json());case 5:throw new Error("fetch host details returns "+n.status);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/txpool",{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch host details returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(N.a)(w.a.mark((function e(t,n,r){var s,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://".concat(t,"/spend-coin"),{method:"POST",body:JSON.stringify({address:n,amount:r})});case 2:if(!(s=e.sent).ok){e.next=5;break}return e.abrupt("return",s.json());case 5:return e.next=7,s.json();case 7:throw c=e.sent,new Error("pay from host ".concat(t," returns ").concat(s.status," ").concat(c.message));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),M=function(){var e=Object(N.a)(w.a.mark((function e(t){var n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t((c={},{type:r.CLEAR_HOSTS,payload:c})),e.next=4,_();case 4:return n=e.sent,n.forEach(function(){var e=Object(N.a)(w.a.mark((function e(n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(n);case 3:(r=e.sent).host=n,t(h(Object(l.a)({},r))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),e.next=8,P();case 8:s=e.sent,t(f({pool:Object.values(s)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}var c}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),G=(n(23),function(e){var t=e.dispatch,n=Object(s.useState)(!1),c=Object(d.a)(n,2),a=c[0],o=c[1],u=function(){var e=Object(N.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,I();case 4:n=e.sent,t((s=n,{type:r.BLOCK,payload:s})),M(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:o(!1);case 13:case"end":return e.stop()}var s}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{children:a?Object(i.jsx)("div",{className:"flex justify-center",children:Object(i.jsx)("img",{className:"w-3/6",src:"gntl-mining.gif"})}):Object(i.jsx)("div",{onClick:u,className:"h-24 w-36 mb-28 bg-trendyBlue text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Mine"})})}),F=function(e){var t=e.state,n=e.dispatch;Object(s.useEffect)((function(){function e(){return(e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L();case 3:t=e.sent,n(j({blocks:t.blocks})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]);var r=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[t.blockchain]),Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[t.blockchain.blocks.map((function(e,n){return Object(i.jsx)(D,{direction:p.Forwards,last:n===t.blockchain.blocks.length-1,blockData:e},n)})),Object(i.jsx)("div",{ref:r})]}),Object(i.jsx)("div",{className:"pt-10 flex justify-center items-center w-full",children:Object(i.jsx)(G,{dispatch:n})})]})},K=function(e){var t,n,r=e.unconfirmedTxData;return Object(i.jsxs)("div",{className:"border border-black w-11/12 h-24 mb-10 bg-white",children:[Object(i.jsxs)("div",{className:"p-2",children:["using tx: ",T(r.vin[0].txid)]}),Object(i.jsxs)("div",{className:"p-2",children:["pay to: ",T(r.vout[0].scriptPubKey),"  amount: ",r.vout[0].value]}),(null===r||void 0===r?void 0:r.vout[1])&&Object(i.jsxs)(i.Fragment,{children:[T(null===r||void 0===r||null===(t=r.vout[1])||void 0===t?void 0:t.scriptPubKey),"  amount: ",null===r||void 0===r||null===(n=r.vout[1])||void 0===n?void 0:n.value]}),Object(i.jsx)("div",{})]})},H=(n(24),function(e){var t=e.host,n=e.address,r=e.totalAmount,c=e.dispatch,a=Object(s.useState)(""),o=Object(d.a)(a,2),u=o[0],l=o[1],j=Object(s.useState)(0),h=Object(d.a)(j,2),f=h[0],p=h[1],v=function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t,u,f);case 3:e.sent,M(c),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c(x({level:b.ERROR,message:e.t0})),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"rounded-md text-white p-4 min-h-100 w-4/5 bg-trendyBlue mb-10",children:[Object(i.jsxs)("div",{className:"justify-content flex space-x-4 pb-4",children:[Object(i.jsx)("div",{className:"flex items-center",children:Object(i.jsxs)("div",{children:["address: ",T(atob(n))]})}),Object(i.jsx)("div",{onClick:function(){navigator.clipboard.writeText(n)},className:"h-10 w-16 bg-trendyYellow text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Copy"})]}),Object(i.jsxs)("div",{className:"mb-4 flex",children:[Object(i.jsxs)("div",{className:"flex align-center space-between",children:[Object(i.jsx)("div",{className:"text-white pr-4 whitespace-nowrap flex flex-col justify-center",children:Object(i.jsx)("div",{className:"",children:"Pay:"})}),Object(i.jsx)("textarea",{onChange:function(e){return p(parseInt(e.target.value))},className:"form-textarea mt-1 mr-2 block w-9/12 border-white overflow-hidden",rows:1,placeholder:"Amount"}),Object(i.jsx)("textarea",{onChange:function(e){return l(e.target.value)},className:"form-textarea mt-1 mr-2 block w-9/12 border-white overflow-hidden",rows:1,placeholder:"To"})]}),Object(i.jsx)("div",{onClick:v,className:"h-10 w-16 mt-1 bg-trendyYellow text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Pay"})]}),Object(i.jsxs)("div",{children:["Balance: ",r]})]})}),U=function(e){var t,n,r=e.state,c=e.dispatch;return Object(s.useEffect)((function(){M(c)}),[c]),Object(i.jsxs)("div",{className:"flex flex-col items-center border-4 border-trendyTurquoise rounded-lg fixed right-0 h-screen bottom-0 w-4/12 overflow-y-scroll",children:[Object(i.jsx)("div",{className:"flex mb-16 items-center justify-center mt-10 font-trendyGrey text-3xl font-medium",children:"Control Panel"}),Object(i.jsx)("div",{className:"flex mb-10 items-center justify-center font-trendyGrey text-xl font-medium",children:"Global Wallets"}),null===r||void 0===r||null===(t=r.hostDetails)||void 0===t?void 0:t.map((function(e,t){return Object(i.jsx)(H,{dispatch:c,host:e.host,address:e.address,totalAmount:e.totalAmount},t)})),Object(i.jsx)("div",{className:"flex mb-10 items-center justify-center font-trendyGrey text-xl font-medium",children:"Unconfirmed Transaction pool"}),null===r||void 0===r||null===(n=r.unconfirmedTxPool)||void 0===n?void 0:n.map((function(e,t){return Object(i.jsx)(K,{unconfirmedTxData:e},t)}))]})},J=(n(25),function(e){var t,n,r=e.state,c=e.dispatch;return Object(s.useEffect)((function(){setTimeout((function(){return c(x({message:"",level:b.BLANK}))}),1e4)}),[r.statusMessage]),Object(i.jsx)("div",{children:Object(i.jsx)("div",{style:{position:"fixed",zIndex:1e3},className:"status-message-".concat(r.statusMessage.level," w-8/12 p-10"),children:(null===r||void 0===r||null===(t=r.statusMessage)||void 0===t?void 0:t.message)&&"".concat(null===r||void 0===r||null===(n=r.statusMessage)||void 0===n?void 0:n.message)})})});var X,W=(X=function(e){var t=e.state,n=e.dispatch;return Object(i.jsxs)("div",{className:"bg-background",children:[Object(i.jsxs)("div",{className:"w-8/12",children:[Object(i.jsx)(J,{state:t,dispatch:n}),Object(i.jsx)(u,{state:t,dispatch:n}),Object(i.jsx)(F,{state:t,dispatch:n})]}),Object(i.jsx)(U,{state:t,dispatch:n})]})},function(e){return Object(i.jsx)(m.Consumer,{children:function(t){var n=t.state,r=t.dispatch;return Object(i.jsx)(X,Object(l.a)(Object(l.a)({},e),{},{state:n,dispatch:r}))}})}),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};o.a.render(Object(i.jsx)(y,{children:Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(W,{})})}),document.getElementById("root")),Y()},8:function(e,t,n){},9:function(e,t,n){}},[[26,1,2]]]);
//# sourceMappingURL=main.410fd1af.chunk.js.map