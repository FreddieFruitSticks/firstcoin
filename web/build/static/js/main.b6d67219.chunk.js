(this["webpackJsonpfirstcoin-ui"]=this["webpackJsonpfirstcoin-ui"]||[]).push([[0],{16:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r,c=n(2),s=n.n(c),a=n(10),i=n.n(a),o=(n(16),n(0)),l=function(e){e.state,e.dispatch;return Object(o.jsxs)("div",{className:"bg-background2 flex flex-col items-center h-24 border-b border-grey mb-10",children:[Object(o.jsx)("div",{className:"text-trendyBlue font-bold text-xl",children:"Firstcoin"}),Object(o.jsx)("div",{className:"text-trendyGrey font-bold",children:"Freddie O'Donnell"}),Object(o.jsx)("div",{className:"text-trendyGrey",children:"Cape Town"})]})},u=n(1),d=n(5);!function(e){e.BLOCKCHAIN="BLOCKCHAIN",e.BLOCK="BLOCK",e.HOST_DETAILS="HOST_DETAILS",e.UNCONFIRMED_TX_POOL="UNCONFIRMED_TX_POOL",e.CLEAR_HOSTS="CLEAR_HOSTS",e.STATUS_MESSAGE="STATUS_MESSAGE"}(r||(r={}));var b,j=function(e){return{type:r.BLOCKCHAIN,payload:e}},f=function(e){return{type:r.UNCONFIRMED_TX_POOL,payload:e}},h=function(e){return{type:r.STATUS_MESSAGE,payload:e}};!function(e){e.ERROR="ERROR",e.SUCCESS="SUCCESS",e.NOTICE="NOTICE",e.BLANK="BLANK"}(b||(b={}));var O,x={blockchain:{blocks:[]},hostDetails:[],unconfirmedTxPool:[],statusMessage:{message:""}},v=function(e,t){switch(console.log("-------------state before-----------------"),console.log(e),console.log("----------------action--------------------"),console.log(t),t.type){case r.BLOCKCHAIN:return Object(u.a)(Object(u.a)({},e),{},{blockchain:Object(u.a)(Object(u.a)({},e.blockchain),t.payload)});case r.BLOCK:return Object(u.a)(Object(u.a)({},e),{},{blockchain:Object(u.a)(Object(u.a)({},e.blockchain),t.payload)});case r.HOST_DETAILS:var n=JSON.parse(JSON.stringify(t.payload)),c=[];Object.values(n).forEach((function(e){return c.push(e)}));var s=function(e){return parseInt(e.split(":")[1])},a=c.sort((function(e,t){return s(e.hostname)<s(t.hostname)?-1:1}));return Object(u.a)(Object(u.a)({},e),{},{hostDetails:a});case r.CLEAR_HOSTS:return Object(u.a)(Object(u.a)({},e),{},{hostDetails:[]});case r.UNCONFIRMED_TX_POOL:return Object(u.a)(Object(u.a)({},e),{},{unconfirmedTxPool:t.payload.pool});case r.STATUS_MESSAGE:return t.payload.message!==e.statusMessage.message&&t.payload.level!==e.statusMessage.level?Object(u.a)(Object(u.a)({},e),{},{statusMessage:Object(u.a)({},t.payload)}):e;default:return e}},p=s.a.createContext({state:x,dispatch:function(e){return console.warn("WARNING! Dispatch function not set. Attemting to dispatch ".concat(e))}}),m=function(e){var t=e.children,n=Object(c.useReducer)(v,Object(u.a)(Object(u.a)({},x),{})),r=Object(d.a)(n,2),s=r[0],a=r[1];return console.log("-------------state after-----------------"),console.log(s),Object(o.jsx)(p.Provider,{value:{state:s,dispatch:a},children:t})},y=n(3),g=n.n(y),w=n(4),S=(n(7),n(8),function(e){var t=e.txOData;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:["scriptPubKey: ",T(t.scriptPubKey)]}),Object(o.jsxs)("div",{children:["value: ",t.value]})]})}),N=function(e){var t=e.txInData;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:["txid: ",t.txid]}),Object(o.jsxs)("div",{children:["vout: ",t.vout]}),Object(o.jsxs)("div",{children:["scriptSig: ",t.scriptSig.substring(0,5)," ..."]})]})},T=function(e){return"".concat(e.substring(0,5),"...").concat(e.substring(20,25),"...").concat(e.substring(e.length-6,e.length-1))},k=function(e){var t=e.txData;return Object(o.jsxs)("div",{className:"text-xs",children:[Object(o.jsxs)("div",{children:["id: ",t.txid.substring(0,5),"..."]}),Object(o.jsxs)("div",{children:["timestamp: ",t.timestamp.toString().substring(0,10),"..."]}),Object(o.jsxs)("div",{children:["txO: [",t.vout.map((function(e,t){return Object(o.jsx)("div",{className:"pl2",children:Object(o.jsx)(S,{txOData:e})},t)})),"]"]}),Object(o.jsxs)("div",{children:["txIn: [",t.vin.map((function(e,t){return Object(o.jsx)("div",{className:"pl2",children:Object(o.jsx)(N,{txInData:e})},t)})),"]"]})]})},E=(n(9),n(11)),C=n.n(E);!function(e){e[e.Backwards=0]="Backwards",e[e.Forwards=1]="Forwards"}(O||(O={}));var _=function(e){var t=e.blockData,n=e.last,r=e.direction,s=Object(c.useState)(!1),a=Object(d.a)(s,2),i=a[0],l=a[1];return Object(o.jsxs)("div",{className:"w-full flex flex-col items-center",children:[Object(o.jsx)("div",{className:"w-5/12 transform transition duration-500 hover:scale-105 flex flex-col items-center",children:Object(o.jsx)(C.a,{duration:500,height:i?"auto":150,className:"w-full border-2 border-trendyGrey rounded-lg animate__animated animate__rubberBand",children:Object(o.jsx)("div",{onClick:function(){return l(!i)},className:" cursor-pointer",children:Object(o.jsxs)("div",{className:"rounded text-trendyGrey bg-trendyGreen tran block p-2 overflow-hidden",children:[Object(o.jsxs)("div",{children:["index: ",t.index]}),Object(o.jsxs)("div",{children:["hash: ",t.hash.substring(0,10),"..."]}),Object(o.jsxs)("div",{children:["prev: ",t.previousHash?t.previousHash.substring(0,10):null]}),Object(o.jsxs)("div",{children:["difficulty: ",t.difficultyLevel]}),Object(o.jsxs)("div",{children:["time: ",t.timestamp]}),Object(o.jsxs)("div",{children:["transactions: ",t.transactions.map((function(e,t){return Object(o.jsx)(k,{txData:e},t)}))]})]})})})}),r==O.Forwards&&!n&&Object(o.jsx)("span",{className:"arrow arrow-down"})]})},A=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_HOST_NAME?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_HOST_NAME:"",D=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/block-chain"));case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch blockchain returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(w.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/create-block"),{method:"POST",body:JSON.stringify({a:1,b:"Textual content"})});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.next=7,t.json();case 7:throw n=e.sent,console.log(n),new Error("create blockchain returns "+t.status);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/hosts"),{method:"POST",body:JSON.stringify({})});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch hosts returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/txpool"),{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("fetch host details returns "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(g.a.mark((function e(t,n,r){var c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/spend-coin-relay"),{method:"POST",body:JSON.stringify({host:t,address:n,amount:r})});case 2:if(!(c=e.sent).ok){e.next=5;break}return e.abrupt("return",c.json());case 5:return e.next=7,c.json();case 7:throw s=e.sent,new Error("pay from host ".concat(t," returns ").concat(c.status," ").concat(s.message));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L();case 3:n=e.sent;try{t((s=Object(u.a)({},n),{type:r.HOST_DETAILS,payload:s}))}catch(a){console.log(a)}return e.next=7,R();case 7:c=e.sent,t(f({pool:Object.values(c)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}var s}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),H=(n(23),function(e){var t=e.dispatch,n=Object(c.useState)(!1),s=Object(d.a)(n,2),a=s[0],i=s[1],l=function(){var e=Object(w.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),e.next=4,P();case 4:n=e.sent,t((c=n,{type:r.BLOCK,payload:c})),B(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:i(!1);case 13:case"end":return e.stop()}var c}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{children:a?Object(o.jsx)("div",{className:"flex justify-center",children:Object(o.jsx)("img",{className:"w-3/6",src:"gntl-mining.gif"})}):Object(o.jsx)("div",{onClick:l,className:"h-24 w-36 mb-28 bg-trendyBlue text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Mine"})})}),K=function(e){var t=e.state,n=e.dispatch;Object(c.useEffect)((function(){function e(){return(e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:t=e.sent,n(j({blocks:t.blocks})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]);var r=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[t.blockchain]),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[t.blockchain.blocks.map((function(e,n){return Object(o.jsx)(_,{direction:O.Forwards,last:n===t.blockchain.blocks.length-1,blockData:e},n)})),Object(o.jsx)("div",{ref:r})]}),Object(o.jsx)("div",{className:"pt-10 flex justify-center items-center w-full",children:Object(o.jsx)(H,{dispatch:n})})]})},M=function(e){var t,n,r=e.unconfirmedTxData;return Object(o.jsxs)("div",{className:"border border-black w-11/12 h-24 mb-10 bg-white",children:[Object(o.jsxs)("div",{className:"p-2",children:["using tx: ",T(r.vin[0].txid)]}),Object(o.jsxs)("div",{className:"p-2",children:["pay to: ",T(r.vout[0].scriptPubKey),"  amount: ",r.vout[0].value]}),(null===r||void 0===r?void 0:r.vout[1])&&Object(o.jsxs)(o.Fragment,{children:[T(null===r||void 0===r||null===(t=r.vout[1])||void 0===t?void 0:t.scriptPubKey),"  amount: ",null===r||void 0===r||null===(n=r.vout[1])||void 0===n?void 0:n.value]}),Object(o.jsx)("div",{})]})},F=(n(24),function(e){var t=e.host,n=e.address,r=e.totalAmount,s=e.dispatch,a=Object(c.useState)(""),i=Object(d.a)(a,2),l=i[0],u=i[1],j=Object(c.useState)(0),f=Object(d.a)(j,2),O=f[0],x=f[1],v=function(){var e=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,l,O);case 3:e.sent,B(s),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),s(h({level:b.ERROR,message:e.t0})),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"rounded-md text-white p-4 min-h-100 w-4/5 bg-trendyBlue mb-10",children:[Object(o.jsxs)("div",{className:"justify-content flex space-x-4 pb-4",children:[Object(o.jsx)("div",{className:"flex items-center",children:Object(o.jsxs)("div",{children:["address: ",T(atob(n))]})}),Object(o.jsx)("div",{onClick:function(){navigator.clipboard.writeText(n)},className:"h-10 w-16 bg-trendyYellow text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Copy"})]}),Object(o.jsxs)("div",{className:"mb-4 flex",children:[Object(o.jsxs)("div",{className:"flex align-center space-between",children:[Object(o.jsx)("div",{className:"text-white pr-4 whitespace-nowrap flex flex-col justify-center",children:Object(o.jsx)("div",{className:"",children:"Pay:"})}),Object(o.jsx)("textarea",{onChange:function(e){return x(parseInt(e.target.value))},className:"form-textarea mt-1 mr-2 block w-9/12 border-white overflow-hidden",rows:1,placeholder:"Amount"}),Object(o.jsx)("textarea",{onChange:function(e){return u(e.target.value)},className:"form-textarea mt-1 mr-2 block w-9/12 border-white overflow-hidden",rows:1,placeholder:"To"})]}),Object(o.jsx)("div",{onClick:v,className:"h-10 w-16 mt-1 bg-trendyYellow text-white flex justify-center items-center transform transition duration-500 hover:scale-105 cursor-pointer font-semibold py-2 px-4 rounded",children:"Pay"})]}),Object(o.jsxs)("div",{children:["Balance: ",r]})]})}),G=function(e){var t,n,r=e.state,s=e.dispatch;return Object(c.useEffect)((function(){B(s)}),[s]),Object(o.jsxs)("div",{className:"flex flex-col items-center border-4 border-trendyTurquoise rounded-lg fixed right-0 h-screen bottom-0 w-4/12 overflow-y-scroll",children:[Object(o.jsx)("div",{className:"flex mb-16 items-center justify-center mt-10 font-trendyGrey text-3xl font-medium",children:"Control Panel"}),Object(o.jsx)("div",{className:"flex mb-10 items-center justify-center font-trendyGrey text-xl font-medium",children:"Global Wallets"}),null===r||void 0===r||null===(t=r.hostDetails)||void 0===t?void 0:t.map((function(e,t){return Object(o.jsx)(F,{dispatch:s,host:e.hostname,address:e.address,totalAmount:e.totalAmount},t)})),Object(o.jsx)("div",{className:"flex mb-10 items-center justify-center font-trendyGrey text-xl font-medium",children:"Unconfirmed Transaction pool"}),null===r||void 0===r||null===(n=r.unconfirmedTxPool)||void 0===n?void 0:n.map((function(e,t){return Object(o.jsx)(M,{unconfirmedTxData:e},t)}))]})},U=(n(25),function(e){var t,n,r=e.state,s=e.dispatch;return Object(c.useEffect)((function(){setTimeout((function(){return s(h({message:"",level:b.BLANK}))}),1e4)}),[r.statusMessage]),Object(o.jsx)("div",{children:Object(o.jsx)("div",{style:{position:"fixed",zIndex:1e3},className:"status-message-".concat(r.statusMessage.level," w-8/12 p-10"),children:(null===r||void 0===r||null===(t=r.statusMessage)||void 0===t?void 0:t.message)&&"".concat(null===r||void 0===r||null===(n=r.statusMessage)||void 0===n?void 0:n.message)})})});var W,J=(W=function(e){var t=e.state,n=e.dispatch;return Object(o.jsxs)("div",{className:"bg-background",children:[Object(o.jsxs)("div",{className:"w-8/12",children:[Object(o.jsx)(U,{state:t,dispatch:n}),Object(o.jsx)(l,{state:t,dispatch:n}),Object(o.jsx)(K,{state:t,dispatch:n})]}),Object(o.jsx)(G,{state:t,dispatch:n})]})},function(e){return Object(o.jsx)(p.Consumer,{children:function(t){var n=t.state,r=t.dispatch;return Object(o.jsx)(W,Object(u.a)(Object(u.a)({},e),{},{state:n,dispatch:r}))}})}),X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};i.a.render(Object(o.jsx)(m,{children:Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(J,{})})}),document.getElementById("root")),X()},8:function(e,t,n){},9:function(e,t,n){}},[[26,1,2]]]);
//# sourceMappingURL=main.b6d67219.chunk.js.map